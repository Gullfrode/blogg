[{"content":"Innstaller Hugo #brew install hugo\nSync #rsync -av \u0026ndash;delete fra til\nLag side p√• github, og legg inn n√∏kkel fra maskina #generer ssh-key cd ~/.ssh ssh-keygen -t rsa -b 4096 -C \u0026ldquo;gullfrode@gmail.com\u0026rdquo; cat id_rsa.pub Lim inn innholdet i github\nüìÅ Lag Script ```bash mkdir -p ~/bin nano ~/bin/oppdatergrimsen ``` ``` export PATH=\"$HOME/bin:$PATH\" ``` ``` source ~/.bash_profile ``` ``` #!/usr/bin/env bash set -euo pipefail\n=== KONFIG === #REPO_DIR=\u0026quot;/Users/grimsen/Library/Mobile Documents/comappleCloudDocs/Privat/Blog/blog\u0026quot;\nObsidian-vault #VAULT_DIR=\u0026quot;/Users/grimsen/Library/Mobile Documents/iCloudmdobsidian/Documents/Mi Casa\u0026quot;\nPOSTS_DIR=\u0026quot;$VAULT_DIR/Posts\u0026quot;\nATTACH_DIR=\u0026quot;$VAULT_DIR/_filer\u0026quot;\nREMOTE_URL=\u0026ldquo;git@github.com:Gullfrode/blogg.git\u0026rdquo;\nDEPLOY_BRANCH=\u0026ldquo;gh-pages\u0026rdquo;\nTMP_BRANCH=\u0026ldquo;gh-pages-tmp\u0026rdquo;\n=== SJEKKER === #for cmd in git rsync python3 hugo; do\ncommand -v \u0026ldquo;$cmd\u0026rdquo; \u0026gt;/dev/null 2\u0026gt;\u0026amp;1 || { echo \u0026ldquo;Mangler $cmd i PATH\u0026rdquo;; exit 1; }\ndone\n[ -d \u0026ldquo;$REPO_DIR\u0026rdquo; ] || { echo \u0026ldquo;Finner ikke REPO_DIR: $REPO_DIR\u0026rdquo;; exit 1; }\n[ -d \u0026ldquo;$POSTS_DIR\u0026rdquo; ] || { echo \u0026ldquo;Finner ikke POSTS_DIR: $POSTS_DIR\u0026rdquo;; exit 1; }\n[ -d \u0026ldquo;$ATTACH_DIR\u0026rdquo; ] || { echo \u0026ldquo;Finner ikke ATTACH_DIR: $ATTACH_DIR\u0026rdquo;; exit 1; }\n=== KJ√òR I REPO === #cd \u0026ldquo;$REPO_DIR\u0026rdquo;\nGit + riktig origin #[ -d .git ] || git init\nif git remote | grep -q \u0026lsquo;^origin$\u0026rsquo;; then\ngit remote set-url origin \u0026ldquo;$REMOTE_URL\u0026rdquo;\nelse\ngit remote add origin \u0026ldquo;$REMOTE_URL\u0026rdquo;\nfi\nS√∏rg for main #if git rev-parse \u0026ndash;verify main \u0026gt;/dev/null 2\u0026gt;\u0026amp;1; then\ngit checkout main\nelse\ngit checkout -b main\nfi\n=== SYNC OBSIDIAN ‚Üí HUGO === #CONTENT_DIR=\u0026quot;$REPO_DIR/content/posts\u0026quot;\nSTATIC_IMAGES_DIR=\u0026quot;$REPO_DIR/static/images\u0026quot;\nmkdir -p \u0026ldquo;$CONTENT_DIR\u0026rdquo; \u0026ldquo;$STATIC_IMAGES_DIR\u0026rdquo;\necho \u0026ldquo;Rsync fra Obsidian/Posts ‚Üí Hugo/content \u0026hellip;\u0026rdquo;\nrsync -av \u0026ndash;delete \u0026ldquo;$POSTS_DIR/\u0026rdquo; \u0026ldquo;$CONTENT_DIR/\u0026rdquo;\n=== BILDER/LENKER === #[ -f \u0026ldquo;$REPO_DIR/images.py\u0026rdquo; ] || { echo \u0026ldquo;images.py mangler i $REPO_DIR\u0026rdquo;; exit 1; }\npython3 \u0026ldquo;$REPO_DIR/images.py\u0026rdquo; \\\n\u0026ndash;posts \u0026ldquo;$CONTENT_DIR\u0026rdquo; \\\n\u0026ndash;attachments \u0026ldquo;$ATTACH_DIR\u0026rdquo; \\\n\u0026ndash;static-images \u0026ldquo;$STATIC_IMAGES_DIR\u0026rdquo;\n=== HUGO BYGG === #echo \u0026ldquo;Bygger Hugo \u0026hellip;\u0026rdquo;\nhugo\n[ -d public ] || { echo \u0026ldquo;public/ mangler (build feilet)\u0026rdquo;; exit 1; }\n=== legg til CNAME === #echo \u0026ldquo;blogg.grimsen.com\u0026rdquo; \u0026gt; public/CNAME\n=== COMMIT \u0026amp; PUSH main === #if ! git diff \u0026ndash;quiet || ! git diff \u0026ndash;cached \u0026ndash;quiet; then git add .; fi\nif ! git diff \u0026ndash;cached \u0026ndash;quiet; then\ngit commit -m \u0026ldquo;Auto: oppdateringer $(date +\u0026rsquo;%Y-%m-%d %H:%M:%S\u0026rsquo;)\u0026rdquo;\nfi\nif git rev-parse \u0026ndash;abbrev-ref \u0026ndash;symbolic-full-name @{u} \u0026gt;/dev/null 2\u0026gt;\u0026amp;1; then\ngit push\nelse\ngit branch -M main\ngit push -u origin main\nfi\n=== DEPLOY TIL gh-pages === #echo \u0026ldquo;Deploy til $DEPLOY_BRANCH \u0026hellip;\u0026rdquo;\ngit branch -D \u0026ldquo;$TMP_BRANCH\u0026rdquo; \u0026gt;/dev/null 2\u0026gt;\u0026amp;1 || true\ngit subtree split \u0026ndash;prefix public -b \u0026ldquo;$TMP_BRANCH\u0026rdquo;\ngit push origin \u0026ldquo;$TMP_BRANCH\u0026rdquo;:\u0026quot;$DEPLOY_BRANCH\u0026quot; \u0026ndash;force\ngit branch -D \u0026ldquo;$TMP_BRANCH\u0026rdquo;\necho \u0026ldquo;Ferdig ‚úî\u0026rdquo;\n","date":"27 september 2025","permalink":"https://blogg.grimsen.com/posts/oppsett-hugo/","section":"Posts","summary":"","title":"2025-09-26"},{"content":"","date":null,"permalink":"https://blogg.grimsen.com/","section":"Grimsens blogg","summary":"","title":"Grimsens blogg"},{"content":"","date":null,"permalink":"https://blogg.grimsen.com/tags/innlegg/","section":"Tags","summary":"","title":"Innlegg"},{"content":"","date":null,"permalink":"https://blogg.grimsen.com/posts/","section":"Posts","summary":"","title":"Posts"},{"content":"","date":null,"permalink":"https://blogg.grimsen.com/tags/","section":"Tags","summary":"","title":"Tags"},{"content":"For √• se at det fungerer # Test ","date":"1 januar 0001","permalink":"https://blogg.grimsen.com/test/","section":"Grimsens blogg","summary":"","title":""},{"content":"","date":null,"permalink":"https://blogg.grimsen.com/categories/","section":"Categories","summary":"","title":"Categories"}]