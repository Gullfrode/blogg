[{"content":"","date":null,"permalink":"https://blogg.grimsen.com/","section":"Grimsens blogg","summary":"","title":"Grimsens blogg"},{"content":"","date":null,"permalink":"https://blogg.grimsen.com/tags/innlegg/","section":"Tags","summary":"","title":"Innlegg"},{"content":"nano gitignore\nnano .gitignore\n# ta med !*.yaml !.gitignore !*.md !*.sh !*.js* # Ignorer alt i .storage .storage/** # Men behold selve mappa og disse filene, inputs fra gui og dashbord: !.storage/ !.storage/lovelace !.storage/lovelace_dashboards !.storage/lovelace_resources !.storage/lovelace.dashboard_responsive !.storage/input_boolean !.storage/input_button !.storage/input_datetime !.storage/input_number !.storage/input_select !.storage/input_text #Ta med nodered !node-red/ #Ikke ta med .cloud/ .ssh/ appdaemon/ blueprints/ custom_components/ deps/ esphome/ glances/ image/ model_cache/ packages/ scripts/ themes/ tts/ www/ zigbee2mqtt/ secrets.yamƒ± .exports .HA_VERSION .ios_conf .jwt_secret .logi_cache.pickle .mealie_token .ps4-games.C863F19FEC5A_4341.json .sonoff.json.spotify-token-logi_cache.timeline .timeline .vacuum .xbox-token.json ‚Ä¢storage ‚Ä¢cloud -google. token backup_config.yaml backup.db frigate.db frigate.db-wal frigate.yml ha_shell.log home-assistant.log home-assistant.log.1 id_rsa* home-assistant_v2.* music_assistant.db zigbee.db zwcfg_0xfa9afacb.xml zwscene.xml home-assistant.log* *.log # ignore logs ekstra sikkerhet home-assistant.log* *.log Lag et nytt repository p√• github logg inn via ssh p√• ha Lag n√∏kkel i /root/config/.ssh\nmkdir -p /root/config/.ssh cd /root/config/.ssh ssh-keygen -t rsa -b 4096 -C \u0026#34;eposten@din.no\u0026#34; lagre i /root/config/.ssh(s√• event flytt med cp om det bir lagret annen plass. Ikke bruk passord om det skal automatiseres)\ninstaller git( i root/config)\ngit init git add . git commit -m \u0026#34;min f√∏rste oppload\u0026#34; Legg til repository\ngit remote add origin git@github.com:Brukernavngithub/repository.git Definer hvor n√∏kkel er\ngit config core.sshCommand \u0026#34;ssh -i /root/config/.ssh/id_rsa -F /dev/null\u0026#34; Kopier ut n√∏kkel og identifiser p√• github\ncat /root/config/.ssh/id_rsa.pub ! git push -u origin master üìÅ Lag shell command og automasjon lag ei fil til shell command i config\nnano pushupdates.sh\ngit add . git commit -m \u0026#34;config files on `date +\u0026#39;%d-%m-%Y %H:%M:%S\u0026#39;`\u0026#34; git push -u origin master Gj√∏r script kj√∏rbart #chmod +x pushupdates.sh Gj√∏r det kj√∏rbart fra shell command #git config core.sshCommand \u0026#39;ssh -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no -i /config/.ssh/id_rsa -F /dev/null\u0026#39; Lag automasjon #alias: Github push description: triggers: - trigger: time at: \u0026#34;01:00:00\u0026#34; weekday: - mon - tue - wed - thu - fri - sat - sun conditions: [] actions: - action: shell_command.pushupdates_github data: {} mode: single ","date":"28 september 2025","permalink":"https://blogg.grimsen.com/posts/2025-09-28-legge-til-ha-filer-i-github/","section":"Posts","summary":"","title":"Legge til HA-filer i github"},{"content":"","date":null,"permalink":"https://blogg.grimsen.com/posts/","section":"Posts","summary":"","title":"Posts"},{"content":"","date":null,"permalink":"https://blogg.grimsen.com/tags/","section":"Tags","summary":"","title":"Tags"},{"content":"Innstaller Hugo #brew install hugo\nSync #rsync -av \u0026ndash;delete fra til\nüìÅ Lag side p√• github, og lim inn n√∏kkel fra maskina generer ssh-key cd ~/.ssh ssh-keygen -t rsa -b 4096 -C \"gullfrode@gmail.com\" cat id_rsa.pub Lim inn innholdet i github üìÅ Lag Script ``` mkdir -p ~/bin nano ~/bin/oppdatergrimsen\nexport PATH=\u0026quot;$HOME/bin:$PATH\u0026quot;\nsource ~/.bash_profile\n#!/usr/bin/env bash\nset -euo pipefail\n=== KONFIG === #REPO_DIR=\u0026quot;/Users/grimsen/Library/Mobile Documents/comappleCloudDocs/Privat/Blog/blog\u0026quot;\nObsidian-vault #VAULT_DIR=\u0026quot;/Users/grimsen/Library/Mobile Documents/iCloudmdobsidian/Documents/Mi Casa\u0026quot;\nPOSTS_DIR=\u0026quot;$VAULT_DIR/Posts\u0026quot;\nATTACH_DIR=\u0026quot;$VAULT_DIR/_filer\u0026quot;\nREMOTE_URL=\u0026ldquo;git@github.com:Gullfrode/blogg.git\u0026rdquo;\nDEPLOY_BRANCH=\u0026ldquo;gh-pages\u0026rdquo;\nTMP_BRANCH=\u0026ldquo;gh-pages-tmp\u0026rdquo;\n=== SJEKKER === #for cmd in git rsync python3 hugo; do\ncommand -v \u0026ldquo;$cmd\u0026rdquo; \u0026gt;/dev/null 2\u0026gt;\u0026amp;1 || { echo \u0026ldquo;Mangler $cmd i PATH\u0026rdquo;; exit 1; }\ndone\n[ -d \u0026ldquo;$REPO_DIR\u0026rdquo; ] || { echo \u0026ldquo;Finner ikke REPO_DIR: $REPO_DIR\u0026rdquo;; exit 1; }\n[ -d \u0026ldquo;$POSTS_DIR\u0026rdquo; ] || { echo \u0026ldquo;Finner ikke POSTS_DIR: $POSTS_DIR\u0026rdquo;; exit 1; }\n[ -d \u0026ldquo;$ATTACH_DIR\u0026rdquo; ] || { echo \u0026ldquo;Finner ikke ATTACH_DIR: $ATTACH_DIR\u0026rdquo;; exit 1; }\n=== KJ√òR I REPO === #cd \u0026ldquo;$REPO_DIR\u0026rdquo;\nGit + riktig origin #[ -d .git ] || git init\nif git remote | grep -q \u0026lsquo;^origin$\u0026rsquo;; then\ngit remote set-url origin \u0026ldquo;$REMOTE_URL\u0026rdquo;\nelse\ngit remote add origin \u0026ldquo;$REMOTE_URL\u0026rdquo;\nfi\nS√∏rg for main #if git rev-parse \u0026ndash;verify main \u0026gt;/dev/null 2\u0026gt;\u0026amp;1; then\ngit checkout main\nelse\ngit checkout -b main\nfi\n=== SYNC OBSIDIAN ‚Üí HUGO === #CONTENT_DIR=\u0026quot;$REPO_DIR/content/posts\u0026quot;\nSTATIC_IMAGES_DIR=\u0026quot;$REPO_DIR/static/images\u0026quot;\nmkdir -p \u0026ldquo;$CONTENT_DIR\u0026rdquo; \u0026ldquo;$STATIC_IMAGES_DIR\u0026rdquo;\necho \u0026ldquo;Rsync fra Obsidian/Posts ‚Üí Hugo/content \u0026hellip;\u0026rdquo;\nrsync -av \u0026ndash;delete \u0026ldquo;$POSTS_DIR/\u0026rdquo; \u0026ldquo;$CONTENT_DIR/\u0026rdquo;\n=== BILDER/LENKER === #[ -f \u0026ldquo;$REPO_DIR/images.py\u0026rdquo; ] || { echo \u0026ldquo;images.py mangler i $REPO_DIR\u0026rdquo;; exit 1; }\npython3 \u0026ldquo;$REPO_DIR/images.py\u0026rdquo; \\\n\u0026ndash;posts \u0026ldquo;$CONTENT_DIR\u0026rdquo; \\\n\u0026ndash;attachments \u0026ldquo;$ATTACH_DIR\u0026rdquo; \\\n\u0026ndash;static-images \u0026ldquo;$STATIC_IMAGES_DIR\u0026rdquo;\n=== HUGO BYGG === #echo \u0026ldquo;Bygger Hugo \u0026hellip;\u0026rdquo;\nhugo\n[ -d public ] || { echo \u0026ldquo;public/ mangler (build feilet)\u0026rdquo;; exit 1; }\n=== legg til CNAME === #echo \u0026ldquo;blogg.grimsen.com\u0026rdquo; \u0026gt; public/CNAME\n=== COMMIT \u0026amp; PUSH main === #if ! git diff \u0026ndash;quiet || ! git diff \u0026ndash;cached \u0026ndash;quiet; then git add .; fi\nif ! git diff \u0026ndash;cached \u0026ndash;quiet; then\ngit commit -m \u0026ldquo;Auto: oppdateringer $(date +\u0026rsquo;%Y-%m-%d %H:%M:%S\u0026rsquo;)\u0026rdquo;\nfi\nif git rev-parse \u0026ndash;abbrev-ref \u0026ndash;symbolic-full-name @{u} \u0026gt;/dev/null 2\u0026gt;\u0026amp;1; then\ngit push\nelse\ngit branch -M main\ngit push -u origin main\nfi\n=== DEPLOY TIL gh-pages === #echo \u0026ldquo;Deploy til $DEPLOY_BRANCH \u0026hellip;\u0026rdquo;\ngit branch -D \u0026ldquo;$TMP_BRANCH\u0026rdquo; \u0026gt;/dev/null 2\u0026gt;\u0026amp;1 || true\ngit subtree split \u0026ndash;prefix public -b \u0026ldquo;$TMP_BRANCH\u0026rdquo;\ngit push origin \u0026ldquo;$TMP_BRANCH\u0026rdquo;:\u0026quot;$DEPLOY_BRANCH\u0026quot; \u0026ndash;force\ngit branch -D \u0026ldquo;$TMP_BRANCH\u0026rdquo;\necho \u0026ldquo;Ferdig ‚úî\u0026rdquo;\n","date":"27 september 2025","permalink":"https://blogg.grimsen.com/posts/2025-09-27-oppsett-hugo/","section":"Posts","summary":"","title":"Oppsett Hugo"},{"content":"For √• se at det fungerer # Test ","date":"1 januar 0001","permalink":"https://blogg.grimsen.com/test/","section":"Grimsens blogg","summary":"","title":""},{"content":"","date":null,"permalink":"https://blogg.grimsen.com/categories/","section":"Categories","summary":"","title":"Categories"}]