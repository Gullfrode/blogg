[{"content":"Innstaller Hugo #brew install hugo\nSync #rsync -av \u0026ndash;delete fra til\nLag side p√• github, og legg inn n√∏kkel fra maskina #generer ssh-key cd ~/.ssh ssh-keygen -t rsa -b 4096 -C \u0026ldquo;gullfrode@gmail.com\u0026rdquo; cat id_rsa.pub Lim inn innholdet i github\nüìÅ Lag Script ``` mkdir -p ~/bin nano ~/bin/oppdatergrimsen ``` export PATH=\u0026#34;$HOME/bin:$PATH\u0026#34; source ~/.bash_profile #!/usr/bin/env bash set -euo pipefail ### === KONFIG === REPO_DIR=\u0026#34;/Users/grimsen/Library/Mobile Documents/com~apple~CloudDocs/Privat/Blog/blog\u0026#34; # Obsidian-vault VAULT_DIR=\u0026#34;/Users/grimsen/Library/Mobile Documents/iCloud~md~obsidian/Documents/Mi Casa\u0026#34; POSTS_DIR=\u0026#34;$VAULT_DIR/Posts\u0026#34; ATTACH_DIR=\u0026#34;$VAULT_DIR/_filer\u0026#34; REMOTE_URL=\u0026#34;git@github.com:Gullfrode/blogg.git\u0026#34; DEPLOY_BRANCH=\u0026#34;gh-pages\u0026#34; TMP_BRANCH=\u0026#34;gh-pages-tmp\u0026#34; ### === SJEKKER === for cmd in git rsync python3 hugo; do command -v \u0026#34;$cmd\u0026#34; \u0026gt;/dev/null 2\u0026gt;\u0026amp;1 || { echo \u0026#34;Mangler $cmd i PATH\u0026#34;; exit 1; } done [ -d \u0026#34;$REPO_DIR\u0026#34; ] || { echo \u0026#34;Finner ikke REPO_DIR: $REPO_DIR\u0026#34;; exit 1; } [ -d \u0026#34;$POSTS_DIR\u0026#34; ] || { echo \u0026#34;Finner ikke POSTS_DIR: $POSTS_DIR\u0026#34;; exit 1; } [ -d \u0026#34;$ATTACH_DIR\u0026#34; ] || { echo \u0026#34;Finner ikke ATTACH_DIR: $ATTACH_DIR\u0026#34;; exit 1; } ### === KJ√òR I REPO === cd \u0026#34;$REPO_DIR\u0026#34; # Git + riktig origin [ -d .git ] || git init if git remote | grep -q \u0026#39;^origin$\u0026#39;; then git remote set-url origin \u0026#34;$REMOTE_URL\u0026#34; else git remote add origin \u0026#34;$REMOTE_URL\u0026#34; fi # S√∏rg for main if git rev-parse --verify main \u0026gt;/dev/null 2\u0026gt;\u0026amp;1; then git checkout main else git checkout -b main fi ### === SYNC OBSIDIAN ‚Üí HUGO === CONTENT_DIR=\u0026#34;$REPO_DIR/content/posts\u0026#34; STATIC_IMAGES_DIR=\u0026#34;$REPO_DIR/static/images\u0026#34; mkdir -p \u0026#34;$CONTENT_DIR\u0026#34; \u0026#34;$STATIC_IMAGES_DIR\u0026#34; echo \u0026#34;Rsync fra Obsidian/Posts ‚Üí Hugo/content ...\u0026#34; rsync -av --delete \u0026#34;$POSTS_DIR/\u0026#34; \u0026#34;$CONTENT_DIR/\u0026#34; ### === BILDER/LENKER === [ -f \u0026#34;$REPO_DIR/images.py\u0026#34; ] || { echo \u0026#34;images.py mangler i $REPO_DIR\u0026#34;; exit 1; } python3 \u0026#34;$REPO_DIR/images.py\u0026#34; \\ --posts \u0026#34;$CONTENT_DIR\u0026#34; \\ --attachments \u0026#34;$ATTACH_DIR\u0026#34; \\ --static-images \u0026#34;$STATIC_IMAGES_DIR\u0026#34; ### === HUGO BYGG === echo \u0026#34;Bygger Hugo ...\u0026#34; hugo [ -d public ] || { echo \u0026#34;public/ mangler (build feilet)\u0026#34;; exit 1; } ### === legg til CNAME === echo \u0026#34;blogg.grimsen.com\u0026#34; \u0026gt; public/CNAME ### === COMMIT \u0026amp; PUSH main === if ! git diff --quiet || ! git diff --cached --quiet; then git add .; fi if ! git diff --cached --quiet; then git commit -m \u0026#34;Auto: oppdateringer $(date +\u0026#39;%Y-%m-%d %H:%M:%S\u0026#39;)\u0026#34; fi if git rev-parse --abbrev-ref --symbolic-full-name @{u} \u0026gt;/dev/null 2\u0026gt;\u0026amp;1; then git push else git branch -M main git push -u origin main fi ### === DEPLOY TIL gh-pages === echo \u0026#34;Deploy til $DEPLOY_BRANCH ...\u0026#34; git branch -D \u0026#34;$TMP_BRANCH\u0026#34; \u0026gt;/dev/null 2\u0026gt;\u0026amp;1 || true git subtree split --prefix public -b \u0026#34;$TMP_BRANCH\u0026#34; git push origin \u0026#34;$TMP_BRANCH\u0026#34;:\u0026#34;$DEPLOY_BRANCH\u0026#34; --force git branch -D \u0026#34;$TMP_BRANCH\u0026#34; echo \u0026#34;Ferdig ‚úî\u0026#34; ¬¥¬¥¬¥ ","date":"27 september 2025","permalink":"https://blogg.grimsen.com/posts/oppsett-hugo/","section":"Posts","summary":"","title":"2025-09-26"},{"content":"","date":null,"permalink":"https://blogg.grimsen.com/","section":"Grimsens blogg","summary":"","title":"Grimsens blogg"},{"content":"","date":null,"permalink":"https://blogg.grimsen.com/tags/innlegg/","section":"Tags","summary":"","title":"Innlegg"},{"content":"","date":null,"permalink":"https://blogg.grimsen.com/posts/","section":"Posts","summary":"","title":"Posts"},{"content":"","date":null,"permalink":"https://blogg.grimsen.com/tags/","section":"Tags","summary":"","title":"Tags"},{"content":"For √• se at det fungerer # Test ","date":"1 januar 0001","permalink":"https://blogg.grimsen.com/test/","section":"Grimsens blogg","summary":"","title":""},{"content":"","date":null,"permalink":"https://blogg.grimsen.com/categories/","section":"Categories","summary":"","title":"Categories"}]